{"version":3,"sources":["day8/reagent/impl/batching.cljs"],"mappings":";AAKA,AAAA,AAAAA,AAAAC,AAAAC,AAAAC,AAAAC;AAAA;AAAA,AAAA,AAASC,AAAmBC;;AAE5B,AAAA,AAAMC,AACHC;AADH,AAKE,AAAAC,AACE;AAAA,AACE,AAAA,AAAAC;AAAA,AAAAC,AAAAC;AAAAC,AAAA,AAAAC,AAAA,AAAA,AAAA;AAAA,AAAA,AAAAF,AAAAC;;AAAA,AAAA,AAAA,AAAA,AAEE,AAACL,AAAAA,AAAAA;;AACD,AAAA,AAAAE;AAAA,AAAAa,AAAAX;AAAAY,AAAA,AAAAV,AAAA,AAAA,AAAA;AAAA,AAAA,AAAAF,AAAAY;;AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAd;AAAA,AAAA,AAAAK,AAAA,AAAAC;AAAAC,AAAA,AAAAF,AAAA,AAAA,AAAAH;AAAA,AAAA,AAAAM,AAAAC,AAAAC,AAAA,AAAAC,AAAAT,AAAA,AAAAK,AAAA,AAAA,AAAAD;;AAAA,AAAAM,AAAAP;;AAAA;AAAA,AAAA,AAAAH,AAAAW;;AAAA,AAAA;;AACA,AAAM,AAAQ,AAAcI;AAA5B,AACE,AAAA,AAAAjB;AAAA,AAAAkB,AAAAhB;AAAAiB,AAAA,AAAAf,AAAA,AAAA,AAAA;AAAA,AAAA,AAAAF,AAAAiB;;AAAA,AAAA,AAAA,AAAA,AAAA;AAAA,AAAA,AAAA,AAAAnB;AAAA,AAAA,AAAAK,AAAA,AAAAC;AAAAC,AAAA,AAAAF,AAAA,AAAA,AAAAH;AAAA,AAAA,AAAAM,AAAAC,AAAAC,AAAA,AAAAC,AAAAT,AAAA,AAAAK,AAAA,AAAA,AAAAD;;AAAA,AAAAM,AAAAP;;AAAA;AAAA,AAAA,AAAAH,AAAAgB;;AAAA,AAAA;;;AADF;;AAJF,AAAA,AAAA,AAAAlB;AAAA,AAAA,AAAAK,AAAA,AAAAC;AAAAC,AAAA,AAAAF,AAAA,AAAA,AAAAH;AAAA,AAAA,AAAAM,AAAAC,AAAAC,AAAA,AAAAC,AAAAT,AAAA,AAAAK,AAAA,AAAA,AAAAD;;AAAA,AAAAM,AAAAP;;AAAA;AAAA,AAAA,AAAAH,AAAAD;;AAAA,AAEE,AAACH,AAAAA,AAAAA;;AACD,AAAA,AAAAE;AAAA,AAAAe,AAAAb;AAAAc,AAAA,AAAAZ,AAAA,AAAA,AAAA;AAAA,AAAA,AAAAF,AAAAc;;AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAhB;AAAA,AAAA,AAAAK,AAAA,AAAAC;AAAAC,AAAA,AAAAF,AAAA,AAAA,AAAAH;AAAA,AAAA,AAAAM,AAAAC,AAAAC,AAAA,AAAAC,AAAAT,AAAA,AAAAK,AAAA,AAAA,AAAAD;;AAAA,AAAAM,AAAAP;;AAAA;AAAA,AAAA,AAAAH,AAAAa;;AAAA,AAAA;;AACA,AAAM,AAAQ,AAAcE;AAA5B,AACE,AAAA,AAAAjB;AAAA,AAAAoB,AAAAlB;AAAAmB,AAAA,AAAAjB,AAAA,AAAA,AAAA;AAAA,AAAA,AAAAF,AAAAmB;;AAAA,AAAA,AAAA,AAAA,AAAA;AAAA,AAAA,AAAA,AAAArB;AAAA,AAAA,AAAAK,AAAA,AAAAC;AAAAC,AAAA,AAAAF,AAAA,AAAA,AAAAH;AAAA,AAAA,AAAAM,AAAAC,AAAAC,AAAA,AAAAC,AAAAT,AAAA,AAAAK,AAAA,AAAA,AAAAD;;AAAA,AAAAM,AAAAP;;AAAA;AAAA,AAAA,AAAAH,AAAAkB;;AAAA,AAAA;;;AADF;;;;AANN,AAAA,AAAArB,AAAAA,AAACJ,AAAAA,AAAAA;;AASH,AAAA,AAAM2B;AAAN,AAEE,AAAM1B,AAAgCC","names":["js/day8","js/day8.reagent","js/day8.reagent.impl","js/day8.reagent.impl.batching","js/day8.reagent.impl.batching.original-next-tick","day8.reagent.impl.batching/original-next-tick","reagent.impl.batching/next-tick","day8.reagent.impl.batching/next-tick","f","G__45171","re-frame.trace/is-trace-enabled?","*current-trace*-orig-val__45172","re-frame.trace/*current-trace*","*current-trace*-temp-val__45173","re-frame.trace/start-trace","end__44719__auto__","re-frame.interop/now","duration__44720__auto__","cljs.core.swap_BANG_","re-frame.trace/traces","cljs.core/conj","cljs.core.assoc","re-frame.trace/run-tracing-callbacks!","*current-trace*-orig-val__45174","*current-trace*-temp-val__45175","*current-trace*-orig-val__45184","*current-trace*-temp-val__45185","reagent.impl.batching/render-queue","*current-trace*-orig-val__45176","*current-trace*-temp-val__45177","*current-trace*-orig-val__45192","*current-trace*-temp-val__45193","day8.reagent.impl.batching/patch-next-tick"],"sourcesContent":["(ns day8.reagent.impl.batching\n  (:require\n    [reagent.impl.batching :as batching]\n    [re-frame.trace :as trace :include-macros true]))\n\n(defonce original-next-tick reagent.impl.batching/next-tick)\n\n(defn next-tick\n  [f]\n  ;; Schedule a trace to be emitted after a render if there is nothing else scheduled after that render.\n  ;; This signals the end of the epoch.\n\n  (original-next-tick\n    (fn []\n      (trace/with-trace\n        {:op-type :raf}\n        (f)\n        (trace/with-trace {:op-type :raf-end})\n        (when (false? (.-scheduled? reagent.impl.batching/render-queue))\n          (trace/with-trace {:op-type :reagent/quiescent}))))))\n\n(defn patch-next-tick\n  []\n  (set! reagent.impl.batching/next-tick next-tick))"]}